{% extends 'roomballot/base-student-jquery.html' %}

{% block content %}

<head>
    <title>Confirm Selection | Downing JCR RBS</title>
</head>

<script>

    $(document).ready(function () {

        // Defining CSRF token.
        $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
        });

        function HandleResponse(responseCode) {
            if (responseCode === 1) location.replace('/roomballot/dashboard');
            else location.assign('../../error/' + responseCode.toString());
        }

        $('#confirm').click(function() {
            $.ajax({
                url: '/roomballot/room/{{ room.room_id }}/confirm-selection',
                type: 'POST',
                csrfmiddlewaretoken: '{{ csrf_token }}',
                success: function (response) {
                    HandleResponse(response.responseCode);
                }
            });
        });

    });
</script>

<div class="container">

    <div class="border-bottom">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <h2>Are you sure?</h2>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <p>You're sure you want to select <b>{{ room }}</b>? This action can't be undone.</p>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div align="left">
                <a class="btn btn-primary mb-5" href="../{{ room.room_id }}">Cancel</a>
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div align="right">
                <button class="btn btn-primary mb-5" id="confirm">Confirm <i class="fas fa-angle-right ml-2"></i></button>
            </div>
        </div>
    </div>
</div>

{% endblock %}